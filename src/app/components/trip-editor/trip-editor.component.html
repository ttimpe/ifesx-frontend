<app-titlebar [title]="'Fahrt bearbeiten'" [canGoBack]="true">
</app-titlebar>
        <form>

            <div class="form-group row">
              <label for="line" class="col-form-label col-sm-2">Linie:</label>
              <div class="col-sm-10">
                <select name="line" id="line" [(ngModel)]="selectedLineID" (ngModelChange)="onLineChange($event)" class="form-control">
                  <option *ngFor="let l of lines" [ngValue]="l.id">{{ l.number }}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <label for="number" class="col-form-label col-sm-2">Kurs:</label>
              <div class="col-sm-10">
                <input type="text" id="courseNumber" name="courseNumber" maxlength="2" class="form-control" [(ngModel)]="trip.courseNumber">
              </div>
            </div>
            <div class="form-group row" *ngIf="selectedLineID">
              <label for="route" class="col-form-label col-sm-2">Route:</label>
              <div class="col-sm-10">
                <select name="route" id="route" [(ngModel)]="trip.routeId" class="form-control" (ngModelChange)="onRouteChange($event)">
                  <option *ngFor="let route of routes" [ngValue]="route.id">{{ route.number }}: {{ route.stops[0].stop?.name }} – {{ route.stops[route.stops.length - 1].stop?.name }}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <label for="turnaroundTime" class="col-form-label col-sm-2">Wendezeit:</label>
              <div class="col-sm-10">
                <input type="number" id="turnaroundTime" name="turnaroundTime" required maxlength="2" class="form-control" [(ngModel)]="trip.turnaroundTime">
              </div>
            </div>
        <ngx-datatable class="bootstrap container striped" [rows]="trip.stopTimes" columnMode="force" [headerHeight]="40" [footerHeight]="50" [rowHeight]="'auto'">

          <ngx-datatable-column name="Abfahrt">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <app-operating-day-time-picker [(time)]="row.arrivalTime"></app-operating-day-time-picker>
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="Name">
            <ng-template let-row="row" ngx-datatable-cell-template>
              {{ row.stop.stop.name }}
            </ng-template>
          </ngx-datatable-column>

        </ngx-datatable>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Schließen</button>
        <button type="button" class="btn btn-primary" (click)="onSave()" data-bs-dismiss="modal">Speichern</button>

      </form>
